(window.webpackJsonp=window.webpackJsonp||[]).push([[253],{598:function(e,a,t){"use strict";t.r(a);var n=t(42),s=Object(n.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"kubernetes-dashboard"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kubernetes-dashboard"}},[e._v("#")]),e._v(" Kubernetes Dashboard")]),e._v(" "),t("h2",{attrs:{id:"概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[e._v("#")]),e._v(" 概述")]),e._v(" "),t("p",[e._v("Kubernetes Dashboard 是 Kubernetes 集群的 Web UI，用于管理集群。")]),e._v(" "),t("h2",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[e._v("#")]),e._v(" 安装")]),e._v(" "),t("p",[e._v("GitHub 地址：Kubernetes Dashboard")]),e._v(" "),t("p",[e._v("下载配置文件")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("wget https://raw.githubusercontent.com/kubernetes/dashboard/v2.0.0-beta2/aio/deploy/recommended.yaml\n")])])]),t("p",[e._v("修改配置如下")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("# 省略部分代码...\n# ------------------- Dashboard Service ------------------- #\nkind: Service\napiVersion: v1\nmetadata:\n  labels:\n    k8s-app: kubernetes-dashboard\n  name: kubernetes-dashboard\n  namespace: kube-system\nspec:\n  # 修改类型为 NodePort 访问\n  type: NodePort\n  ports:\n    - port: 443\n      targetPort: 8443\n      # 设置端口号为 30001\n      nodePort: 30001\n  selector:\n    k8s-app: kubernetes-dashboard\n")])])]),t("p",[e._v("部署到集群")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("# 部署\nkubectl create -f recommended.yaml\n# 查看\nkubectl -n kubernetes-dashboard get pods\nkubectl -n kubernetes-dashboard get service kubernetes-dashboard\nkubectl -n kubernetes-dashboard describe service kubernetes-dashboard\n")])])]),t("h2",{attrs:{id:"访问"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#访问"}},[e._v("#")]),e._v(" 访问")]),e._v(" "),t("p",[e._v("需要使用 NodeIP:30001 访问 Dashboard，因为证书原因除火狐浏览器外其它浏览器无法直接打开页面")]),e._v(" "),t("p",[e._v("Chrome 浏览器显示如下")]),e._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8mxgq880gj30sd0hf0t7.jpg"}})]),e._v(" "),t("p",[e._v("Firefox 浏览器显示如下")]),e._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8mxhz23ygj30xt0lvq3r.jpg"}})]),e._v("\n点击 接受风险并继续 即可显示欢迎界面\n"),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8mxieu7zjj30uq0gtaan.jpg"}})]),e._v(" "),t("h2",{attrs:{id:"登录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#登录"}},[e._v("#")]),e._v(" 登录")]),e._v(" "),t("p",[e._v("我们采用 Token 方式登录")]),e._v(" "),t("ul",[t("li",[e._v("创建登录账号，创建一个名为 dashboard-adminuser.yaml 的配置文件")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("apiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: admin-user\n  namespace: kubernetes-dashboard\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: admin-user\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: cluster-admin\nsubjects:\n- kind: ServiceAccount\n  name: admin-user\n  namespace: kubernetes-dashboard\n")])])]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("kubectl create -f dashboard-adminuser.yaml\n")])])]),t("ul",[t("li",[e._v("打印 Token 信息")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("kubectl -n kubernetes-dashboard describe secret $(kubectl -n kubernetes-dashboard get secret | grep admin-user | awk '{print $1}')\n# 输出如下\nName:         admin-user-token-2v8vd\nNamespace:    kubernetes-dashboard\nLabels:       <none>\nAnnotations:  kubernetes.io/service-account.name: admin-user\n              kubernetes.io/service-account.uid: f6f23bc9-3f34-4452-9977-8915e77fbef3\nType:  kubernetes.io/service-account-token\nData\n====\nnamespace:  20 bytes\ntoken:      eyJhbGciOiJSUzI1NiIsImtpZCI6IiJ9.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJhZG1pbi11c2VyLXRva2VuLTJ2OHZkIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQubmFtZSI6ImFkbWluLXVzZXIiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC51aWQiOiJmNmYyM2JjOS0zZjM0LTQ0NTItOTk3Ny04OTE1ZTc3ZmJlZjMiLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6a3ViZXJuZXRlcy1kYXNoYm9hcmQ6YWRtaW4tdXNlciJ9.d7TVh5L9OKBLY62FXF8ZDjp7dZMH6hmOgd0QKCwPaNEGL_pzJrz1j5JC0TlSaQgFXJKVhUq3WzBsKC2yAsgOc53AKNfJbv0UWKVk5sLXwi79rZiaUdB6cGHOVxiMxUHsluhDAs7DoALyOT3svY5JSh_f5f5h92ZUxBTx5CeFHr47B_MnjG0kgeRR7p8i2vV1OLnW0JQDg-eI0usfFYIzjBy3z1NiVjJJ8ON_ygUNapSXQLuLanjv0Vei_XVTaxfqL9-8AabSm_VDo-mTkqDJWK-utBvQ1AajOWs9fbz8ey6GiC33KevaxxPjNvKfIJI2h0FvDUffy6qysT-IuN2ZEA\nca.crt:     1025 bytes\n")])])]),t("ul",[t("li",[e._v("将 Token 输入浏览器，成功登陆后效果如下")])]),e._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8mxjt4aj0j31gm0nx0v2.jpg"}})])])}),[],!1,null,null,null);a.default=s.exports}}]);